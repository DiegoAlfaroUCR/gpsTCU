<!DOCTYPE html>
<html>
<head>
    <title>Real-Time GPS Tracking</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
        var map, marker, routePath;
        var routeCoords = [];

        function initMap() {
            var initialPos = {lat: 40.758896, lng: -73.985130}; // NYC default
            map = new google.maps.Map(document.getElementById('map'), {zoom: 15, center: initialPos});
            marker = new google.maps.Marker({position: initialPos, map: map});

            routePath = new google.maps.Polyline({
                path: routeCoords,
                geodesic: true,
                strokeColor: '#FF0000',
                strokeOpacity: 1.0,
                strokeWeight: 3
            });
            routePath.setMap(map);

            var socket = io.connect('http://' + document.domain + ':' + location.port);
            socket.on('gps_update', function(data) {
                var newPos = {lat: data.lat, lng: data.lon};
                marker.setPosition(newPos);
                map.setCenter(newPos);

                routeCoords.push(newPos);
                routePath.setPath(routeCoords);
            });
        }
    </script>
</head>
<body onload="initMap()">
    <h2>Real-Time GPS Tracking</h2>
    <div id="map" style="width: 100%; height: 500px;"></div>
</body>
</html>
